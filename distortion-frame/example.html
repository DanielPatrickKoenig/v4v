<!DOCTYPE html>
<html>
<head>
    <title>DISTORTION-FRAME-EXAMPLE</title>
    <script src="../js/v4v.js"></script>
    <script>
        v4v.ready(function(){

            var stage = v4v.stage(document.getElementById('exampleContainer'));

            var startPath = document.getElementById("facebookpath").getAttribute("d");

            var frame = v4v.path(stage,{stroke:"#cc0000",fill:"transparent"},[
                {x:0,y:0,r:0},
                {x:0,y:1,r:0},
                {x:1,y:0,r:0}
            ]);

            
            var topLeftHandle = v4v.circle(stage,{cx:200,cy:200,r:10});
            var topRightHandle = v4v.circle(stage,{cx:320,cy:200,r:10});
            var bottomRightHandle = v4v.circle(stage,{cx:320,cy:340,r:10});
            var bottomLeftHandle = v4v.circle(stage,{cx:200,cy:340,r:10});

            topLeftHandle.Drag(onHandleDragged);
            topRightHandle.Drag(onHandleDragged);
            bottomRightHandle.Drag(onHandleDragged);
            bottomLeftHandle.Drag(onHandleDragged);

            var df = v4v.distortionFrame(Number(topLeftHandle.attr("cx")),Number(topLeftHandle.attr("cy")),Number(topRightHandle.attr("cx"))-Number(topLeftHandle.attr("cx")),Number(bottomLeftHandle.attr("cy"))-Number(topLeftHandle.attr("cy")));

            onHandleDragged();
            function onHandleDragged(){
                var cornerPoints = [{x:Number(topLeftHandle.attr("cx")),y:Number(topLeftHandle.attr("cy"))},
                    {x:Number(topRightHandle.attr("cx")),y:Number(topRightHandle.attr("cy"))},
                    {x:Number(bottomRightHandle.attr("cx")),y:Number(bottomRightHandle.attr("cy"))},
                    {x:Number(bottomLeftHandle.attr("cx")),y:Number(bottomLeftHandle.attr("cy"))}];
                frame.attr('d',stage.getLineString(cornerPoints)+"Z");

                df.setTL(cornerPoints[0].x,cornerPoints[0].y);
                df.setTR(cornerPoints[1].x,cornerPoints[1].y);
                df.setBR(cornerPoints[2].x,cornerPoints[2].y);
                df.setBL(cornerPoints[3].x,cornerPoints[3].y);

                document.getElementById("facebookpath").setAttribute("d",v4v.pathTransformer(startPath,{x:0,y:0}).distortPath(df));

                
            }


        });

        
    </script>
    </head>
    <body>
        <svg style="width:1000px; height: 800px;" id="exampleContainer">
            <path id='facebookpath' d='M 10.426 106.383 c 0 -30.505 0 -61.01 0 -91.514 c 0.057 -0.203 0.131 -0.4 0.167 -0.606 c 0.424 -2.445 2.157 -4.177 4.594 -4.595 c 0.206 -0.035 0.405 -0.111 0.608 -0.167 h 91.514 c 0.203 0.057 0.401 0.133 0.607 0.167 c 2.44 0.419 4.173 2.153 4.592 4.593 c 0.036 0.207 0.111 0.405 0.168 0.608 v 91.6 c -0.057 0.171 -0.135 0.339 -0.166 0.515 c -0.437 2.465 -2.148 4.177 -4.602 4.602 c -0.176 0.03 -0.344 0.109 -0.515 0.166 h -26.33 c 0.003 -0.313 0.01 -0.625 0.01 -0.937 c 0 -12.682 0 -25.362 0 -38.044 v -0.617 c 0.221 0 0.389 0 0.556 0 c 3.977 -0.001 7.953 -0.001 11.928 -0.001 c 0.82 0 0.802 -0.001 0.899 -0.818 c 0.255 -2.138 0.523 -4.276 0.797 -6.413 c 0.329 -2.556 0.672 -5.112 1.003 -7.669 c 0.076 -0.582 0.067 -0.584 -0.548 -0.584 c -4.686 0 -9.373 0 -14.058 0 h -0.555 c -0.01 -0.148 -0.021 -0.246 -0.021 -0.343 c -0.001 -3.251 -0.021 -6.504 0.013 -9.755 c 0.008 -0.887 0.107 -1.786 0.281 -2.657 c 0.433 -2.163 1.721 -3.6 3.896 -4.077 c 1.127 -0.248 2.298 -0.374 3.453 -0.4 c 2.541 -0.058 5.083 -0.026 7.625 -0.009 c 0.412 0.002 0.53 -0.121 0.526 -0.529 c -0.018 -2.344 -0.008 -4.688 -0.008 -7.029 c 0 -1.989 -0.007 -3.977 0.006 -5.965 c 0.002 -0.347 -0.115 -0.476 -0.461 -0.493 c -0.623 -0.032 -1.242 -0.137 -1.865 -0.16 c -3.347 -0.121 -6.695 -0.271 -10.044 -0.321 c -2.922 -0.045 -5.759 0.481 -8.472 1.608 c -4.058 1.685 -7.041 4.511 -8.942 8.465 c -1.401 2.913 -2.021 6.02 -2.067 9.23 c -0.059 3.989 -0.026 7.98 -0.034 11.971 c 0 0.148 0 0.296 0 0.464 c -0.234 0 -0.402 0 -0.572 0 c -4.089 0 -8.18 0.006 -12.27 -0.01 c -0.424 -0.001 -0.559 0.108 -0.557 0.547 c 0.016 4.799 0.009 9.6 0.01 14.399 c 0 0.547 0.002 0.548 0.57 0.548 c 4.091 0 8.181 0 12.271 0 h 0.548 c 0 0.186 0 0.338 0 0.491 c 0 12.823 0 25.646 0 38.47 c 0 0.212 -0.015 0.425 -0.022 0.637 H 15.709 c -0.172 -0.057 -0.338 -0.135 -0.515 -0.166 c -2.453 -0.427 -4.175 -2.146 -4.601 -4.596 C 10.559 106.784 10.483 106.585 10.426 106.383 M 35.338 126 h 1.043 v -3.658 h 3.058 v -0.863 h -3.058 v -2.687 h 3.31 v -0.875 h -4.354 V 126 Z M 44.42 123.458 L 45.284 126 h 1.115 l -2.758 -8.083 h -1.259 L 39.635 126 h 1.08 l 0.839 -2.542 H 44.42 Z M 41.77 122.643 l 0.792 -2.339 c 0.156 -0.492 0.288 -0.983 0.408 -1.463 h 0.024 c 0.12 0.468 0.24 0.948 0.419 1.475 l 0.792 2.327 H 41.77 Z M 52.844 124.909 c -0.42 0.204 -1.067 0.336 -1.703 0.336 c -1.967 0 -3.106 -1.271 -3.106 -3.25 c 0 -2.123 1.259 -3.334 3.154 -3.334 c 0.671 0 1.235 0.144 1.631 0.335 l 0.252 -0.851 c -0.276 -0.144 -0.911 -0.36 -1.919 -0.36 c -2.506 0 -4.222 1.715 -4.222 4.246 c 0 2.65 1.715 4.09 3.994 4.09 c 0.983 0 1.751 -0.192 2.135 -0.384 L 52.844 124.909 Z M 58.556 121.347 h -3.142 v -2.555 h 3.322 v -0.875 h -4.366 V 126 h 4.545 v -0.875 h -3.502 v -2.915 h 3.142 V 121.347 Z M 60.274 125.977 c 0.348 0.048 0.899 0.096 1.619 0.096 c 1.319 0 2.23 -0.24 2.794 -0.755 c 0.408 -0.396 0.684 -0.923 0.684 -1.619 c 0 -1.199 -0.899 -1.835 -1.667 -2.027 v -0.024 c 0.852 -0.312 1.367 -0.996 1.367 -1.775 c 0 -0.636 -0.252 -1.116 -0.672 -1.427 c -0.503 -0.408 -1.175 -0.588 -2.219 -0.588 c -0.731 0 -1.451 0.072 -1.907 0.168 V 125.977 Z M 61.318 118.732 c 0.168 -0.036 0.444 -0.072 0.923 -0.072 c 1.056 0 1.775 0.372 1.775 1.319 c 0 0.779 -0.647 1.355 -1.751 1.355 h -0.947 V 118.732 Z M 61.318 122.126 h 0.863 c 1.14 0 2.087 0.456 2.087 1.559 c 0 1.176 -0.996 1.571 -2.075 1.571 c -0.372 0 -0.672 -0.012 -0.875 -0.048 V 122.126 Z M 70.052 117.785 c -2.159 0 -3.754 1.679 -3.754 4.246 c 0 2.447 1.5 4.102 3.634 4.102 c 2.063 0 3.754 -1.475 3.754 -4.257 C 73.687 119.476 72.259 117.785 70.052 117.785 Z M 70.004 118.637 c 1.739 0 2.579 1.679 2.579 3.286 c 0 1.835 -0.936 3.358 -2.591 3.358 c -1.643 0 -2.578 -1.547 -2.578 -3.274 C 67.414 120.231 68.277 118.637 70.004 118.637 Z M 78.32 117.785 c -2.159 0 -3.754 1.679 -3.754 4.246 c 0 2.447 1.5 4.102 3.634 4.102 c 2.063 0 3.754 -1.475 3.754 -4.257 C 81.954 119.476 80.527 117.785 78.32 117.785 Z M 78.272 118.637 c 1.739 0 2.579 1.679 2.579 3.286 c 0 1.835 -0.936 3.358 -2.591 3.358 c -1.643 0 -2.578 -1.547 -2.578 -3.274 C 75.682 120.231 76.545 118.637 78.272 118.637 Z M 83.314 126 h 1.043 v -3.083 l 0.768 -0.887 l 2.663 3.97 h 1.235 l -3.154 -4.653 l 2.926 -3.43 H 87.5 l -2.471 3.034 c -0.204 0.264 -0.419 0.552 -0.636 0.864 h -0.036 v -3.898 h -1.043 V 126 Z' />
        </svg>
    </body>
</html>